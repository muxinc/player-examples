{"id":"/uuo","dependencies":[{"name":"/Users/mmcc/Projects/muxinc/playground/videojs/package.json","includedInParent":true,"mtime":1546639489646},{"name":"/Users/mmcc/Projects/muxinc/playground/videojs/node_modules/mux.js/package.json","includedInParent":true,"mtime":1546637285878},{"name":"../data/silence","loc":{"line":1,"column":28},"parent":"/Users/mmcc/Projects/muxinc/playground/videojs/node_modules/mux.js/lib/mp4/audio-frame-utils.js","resolved":"/Users/mmcc/Projects/muxinc/playground/videojs/node_modules/mux.js/lib/data/silence.js"},{"name":"../utils/clock","loc":{"line":2,"column":20},"parent":"/Users/mmcc/Projects/muxinc/playground/videojs/node_modules/mux.js/lib/mp4/audio-frame-utils.js","resolved":"/Users/mmcc/Projects/muxinc/playground/videojs/node_modules/mux.js/lib/utils/clock.js"}],"generated":{"js":"var e=require(\"../data/silence\"),t=require(\"../utils/clock\"),a=9e4,n=function(e){var t,a=0;for(t=0;t<e.length;t++)a+=e[t].data.byteLength;return a},r=function(n,r,i,s){var o,m,l,d,u=0,c=0,f=0;if(r.length&&(o=t.audioTsToVideoTs(n.baseMediaDecodeTime,n.samplerate),m=Math.ceil(a/(n.samplerate/1024)),i&&s&&(u=o-Math.max(i,s),f=(c=Math.floor(u/m))*m),!(c<1||f>a/2))){for((l=e[n.samplerate])||(l=r[0].data),d=0;d<c;d++)r.splice(d,0,{data:l});n.baseMediaDecodeTime-=Math.floor(t.videoTsToAudioTs(f,n.samplerate))}},i=function(e,t,a){return t.minSegmentDts>=a?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=a&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},s=function(e){var t,a,n=[];for(t=0;t<e.length;t++)a=e[t],n.push({size:a.data.byteLength,duration:1024});return n},o=function(e){var t,a,r=0,i=new Uint8Array(n(e));for(t=0;t<e.length;t++)a=e[t],i.set(a.data,r),r+=a.data.byteLength;return i};module.exports={prefixWithSilence:r,trimAdtsFramesByEarliestDts:i,generateSampleTable:s,concatenateFrameData:o};","map":{"mappings":[{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":1,"column":0},"generated":{"line":1,"column":4}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":1,"column":0},"generated":{"line":1,"column":6}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":1,"column":0},"generated":{"line":1,"column":14}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":2,"column":0},"generated":{"line":1,"column":33}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":2,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":2,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":4,"column":0},"generated":{"line":1,"column":61}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":4,"column":0},"generated":{"line":1,"column":63}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":9,"column":0},"generated":{"line":1,"column":67}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":9,"column":0},"generated":{"line":1,"column":69}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":9,"column":0},"generated":{"line":1,"column":78}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":10,"column":0},"generated":{"line":1,"column":81}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":11,"column":0},"generated":{"line":1,"column":85}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":13,"column":0},"generated":{"line":1,"column":87}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":13,"column":0},"generated":{"line":1,"column":89}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":16,"column":0},"generated":{"line":1,"column":91}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":16,"column":0},"generated":{"line":1,"column":95}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":16,"column":0},"generated":{"line":1,"column":97}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":16,"column":0},"generated":{"line":1,"column":99}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":16,"column":0},"generated":{"line":1,"column":101}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":16,"column":0},"generated":{"line":1,"column":103}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":16,"column":0},"generated":{"line":1,"column":110}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":18,"column":0},"generated":{"line":1,"column":114}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":17,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":17,"column":0},"generated":{"line":1,"column":119}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":18,"column":0},"generated":{"line":1,"column":122}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":18,"column":0},"generated":{"line":1,"column":127}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":21,"column":0},"generated":{"line":1,"column":138}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":21,"column":0},"generated":{"line":1,"column":145}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":26,"column":0},"generated":{"line":1,"column":148}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":26,"column":0},"generated":{"line":1,"column":150}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":27,"column":0},"generated":{"line":1,"column":159}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":28,"column":0},"generated":{"line":1,"column":161}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":29,"column":0},"generated":{"line":1,"column":163}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":30,"column":0},"generated":{"line":1,"column":165}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":32,"column":0},"generated":{"line":1,"column":168}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":33,"column":0},"generated":{"line":1,"column":172}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":34,"column":0},"generated":{"line":1,"column":174}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":38,"column":0},"generated":{"line":1,"column":176}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":39,"column":0},"generated":{"line":1,"column":178}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":35,"column":0},"generated":{"line":1,"column":180}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":35,"column":0},"generated":{"line":1,"column":182}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":36,"column":0},"generated":{"line":1,"column":184}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":36,"column":0},"generated":{"line":1,"column":186}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":37,"column":0},"generated":{"line":1,"column":188}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":37,"column":0},"generated":{"line":1,"column":190}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":41,"column":0},"generated":{"line":1,"column":192}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":41,"column":0},"generated":{"line":1,"column":195}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":41,"column":0},"generated":{"line":1,"column":197}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":45,"column":0},"generated":{"line":1,"column":206}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":46,"column":0},"generated":{"line":1,"column":208}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":46,"column":0},"generated":{"line":1,"column":210}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":46,"column":0},"generated":{"line":1,"column":227}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":46,"column":0},"generated":{"line":1,"column":229}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":46,"column":0},"generated":{"line":1,"column":249}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":46,"column":0},"generated":{"line":1,"column":251}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":48,"column":0},"generated":{"line":1,"column":263}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":48,"column":0},"generated":{"line":1,"column":265}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":48,"column":0},"generated":{"line":1,"column":270}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":48,"column":0},"generated":{"line":1,"column":275}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":48,"column":0},"generated":{"line":1,"column":278}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":48,"column":0},"generated":{"line":1,"column":280}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":48,"column":0},"generated":{"line":1,"column":291}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":50,"column":0},"generated":{"line":1,"column":298}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":50,"column":0},"generated":{"line":1,"column":301}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":52,"column":0},"generated":{"line":1,"column":305}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":53,"column":0},"generated":{"line":1,"column":307}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":53,"column":0},"generated":{"line":1,"column":309}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":53,"column":0},"generated":{"line":1,"column":314}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":53,"column":0},"generated":{"line":1,"column":318}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":53,"column":0},"generated":{"line":1,"column":320}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":56,"column":0},"generated":{"line":1,"column":323}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":55,"column":0},"generated":{"line":1,"column":326}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":55,"column":0},"generated":{"line":1,"column":328}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":55,"column":0},"generated":{"line":1,"column":333}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":55,"column":0},"generated":{"line":1,"column":339}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":55,"column":0},"generated":{"line":1,"column":341}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":56,"column":0},"generated":{"line":1,"column":345}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":61,"column":0},"generated":{"line":1,"column":350}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":61,"column":0},"generated":{"line":1,"column":352}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":61,"column":0},"generated":{"line":1,"column":355}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":61,"column":0},"generated":{"line":1,"column":357}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":61,"column":0},"generated":{"line":1,"column":359}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":61,"column":0},"generated":{"line":1,"column":363}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":73,"column":0},"generated":{"line":1,"column":364}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":65,"column":0},"generated":{"line":1,"column":369}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":65,"column":0},"generated":{"line":1,"column":371}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":65,"column":0},"generated":{"line":1,"column":373}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":65,"column":0},"generated":{"line":1,"column":375}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":70,"column":0},"generated":{"line":1,"column":390}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":70,"column":0},"generated":{"line":1,"column":392}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":70,"column":0},"generated":{"line":1,"column":394}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":70,"column":0},"generated":{"line":1,"column":397}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":73,"column":0},"generated":{"line":1,"column":403}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":73,"column":0},"generated":{"line":1,"column":405}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":73,"column":0},"generated":{"line":1,"column":407}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":73,"column":0},"generated":{"line":1,"column":409}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":73,"column":0},"generated":{"line":1,"column":411}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":74,"column":0},"generated":{"line":1,"column":415}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":74,"column":0},"generated":{"line":1,"column":417}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":74,"column":0},"generated":{"line":1,"column":424}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":74,"column":0},"generated":{"line":1,"column":426}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":74,"column":0},"generated":{"line":1,"column":428}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":75,"column":0},"generated":{"line":1,"column":429}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":75,"column":0},"generated":{"line":1,"column":434}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":79,"column":0},"generated":{"line":1,"column":438}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":79,"column":0},"generated":{"line":1,"column":440}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":80,"column":0},"generated":{"line":1,"column":461}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":80,"column":0},"generated":{"line":1,"column":466}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":80,"column":0},"generated":{"line":1,"column":472}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":80,"column":0},"generated":{"line":1,"column":474}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":80,"column":0},"generated":{"line":1,"column":491}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":80,"column":0},"generated":{"line":1,"column":493}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":80,"column":0},"generated":{"line":1,"column":495}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":87,"column":0},"generated":{"line":1,"column":510}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":87,"column":0},"generated":{"line":1,"column":512}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":87,"column":0},"generated":{"line":1,"column":521}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":87,"column":0},"generated":{"line":1,"column":523}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":87,"column":0},"generated":{"line":1,"column":525}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":88,"column":0},"generated":{"line":1,"column":528}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":88,"column":0},"generated":{"line":1,"column":535}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":88,"column":0},"generated":{"line":1,"column":537}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":88,"column":0},"generated":{"line":1,"column":552}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":89,"column":0},"generated":{"line":1,"column":554}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":93,"column":0},"generated":{"line":1,"column":557}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":93,"column":0},"generated":{"line":1,"column":559}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":93,"column":0},"generated":{"line":1,"column":573}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":93,"column":0},"generated":{"line":1,"column":575}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":95,"column":0},"generated":{"line":1,"column":577}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":95,"column":0},"generated":{"line":1,"column":579}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":95,"column":0},"generated":{"line":1,"column":586}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":95,"column":0},"generated":{"line":1,"column":595}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":97,"column":0},"generated":{"line":1,"column":598}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":97,"column":0},"generated":{"line":1,"column":605}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":97,"column":0},"generated":{"line":1,"column":607}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":97,"column":0},"generated":{"line":1,"column":612}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":616}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":618}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":632}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":637}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":641}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":643}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":657}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":98,"column":0},"generated":{"line":1,"column":659}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":99,"column":0},"generated":{"line":1,"column":664}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":99,"column":0},"generated":{"line":1,"column":666}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":99,"column":0},"generated":{"line":1,"column":680}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":99,"column":0},"generated":{"line":1,"column":682}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":100,"column":0},"generated":{"line":1,"column":697}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":108,"column":0},"generated":{"line":1,"column":704}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":108,"column":0},"generated":{"line":1,"column":706}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":108,"column":0},"generated":{"line":1,"column":715}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":109,"column":0},"generated":{"line":1,"column":718}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":110,"column":0},"generated":{"line":1,"column":722}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":111,"column":0},"generated":{"line":1,"column":724}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":112,"column":0},"generated":{"line":1,"column":726}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":112,"column":0},"generated":{"line":1,"column":728}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":114,"column":0},"generated":{"line":1,"column":731}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":114,"column":0},"generated":{"line":1,"column":735}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":114,"column":0},"generated":{"line":1,"column":737}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":114,"column":0},"generated":{"line":1,"column":739}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":114,"column":0},"generated":{"line":1,"column":741}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":114,"column":0},"generated":{"line":1,"column":743}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":114,"column":0},"generated":{"line":1,"column":750}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":115,"column":0},"generated":{"line":1,"column":754}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":115,"column":0},"generated":{"line":1,"column":756}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":115,"column":0},"generated":{"line":1,"column":758}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":116,"column":0},"generated":{"line":1,"column":761}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":116,"column":0},"generated":{"line":1,"column":763}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":116,"column":0},"generated":{"line":1,"column":768}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":117,"column":0},"generated":{"line":1,"column":769}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":117,"column":0},"generated":{"line":1,"column":774}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":117,"column":0},"generated":{"line":1,"column":776}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":117,"column":0},"generated":{"line":1,"column":781}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":118,"column":0},"generated":{"line":1,"column":792}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":118,"column":0},"generated":{"line":1,"column":801}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":121,"column":0},"generated":{"line":1,"column":808}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":121,"column":0},"generated":{"line":1,"column":815}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":125,"column":0},"generated":{"line":1,"column":818}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":125,"column":0},"generated":{"line":1,"column":820}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":125,"column":0},"generated":{"line":1,"column":829}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":126,"column":0},"generated":{"line":1,"column":832}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":127,"column":0},"generated":{"line":1,"column":836}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":128,"column":0},"generated":{"line":1,"column":838}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":129,"column":0},"generated":{"line":1,"column":840}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":129,"column":0},"generated":{"line":1,"column":842}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":130,"column":0},"generated":{"line":1,"column":844}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":130,"column":0},"generated":{"line":1,"column":846}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":130,"column":0},"generated":{"line":1,"column":850}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":130,"column":0},"generated":{"line":1,"column":861}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":130,"column":0},"generated":{"line":1,"column":863}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":132,"column":0},"generated":{"line":1,"column":867}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":132,"column":0},"generated":{"line":1,"column":871}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":132,"column":0},"generated":{"line":1,"column":873}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":132,"column":0},"generated":{"line":1,"column":875}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":132,"column":0},"generated":{"line":1,"column":877}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":132,"column":0},"generated":{"line":1,"column":879}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":132,"column":0},"generated":{"line":1,"column":886}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":133,"column":0},"generated":{"line":1,"column":890}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":133,"column":0},"generated":{"line":1,"column":892}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":133,"column":0},"generated":{"line":1,"column":894}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":135,"column":0},"generated":{"line":1,"column":897}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":135,"column":0},"generated":{"line":1,"column":899}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":135,"column":0},"generated":{"line":1,"column":903}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":135,"column":0},"generated":{"line":1,"column":905}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":135,"column":0},"generated":{"line":1,"column":910}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":136,"column":0},"generated":{"line":1,"column":913}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":136,"column":0},"generated":{"line":1,"column":916}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":136,"column":0},"generated":{"line":1,"column":918}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":136,"column":0},"generated":{"line":1,"column":923}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":138,"column":0},"generated":{"line":1,"column":934}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":138,"column":0},"generated":{"line":1,"column":941}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":141,"column":0},"generated":{"line":1,"column":944}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":141,"column":0},"generated":{"line":1,"column":951}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":141,"column":0},"generated":{"line":1,"column":959}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":142,"column":0},"generated":{"line":1,"column":960}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":142,"column":0},"generated":{"line":1,"column":978}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":143,"column":0},"generated":{"line":1,"column":980}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":143,"column":0},"generated":{"line":1,"column":1008}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":144,"column":0},"generated":{"line":1,"column":1010}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":144,"column":0},"generated":{"line":1,"column":1030}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":145,"column":0},"generated":{"line":1,"column":1032}},{"source":"node_modules/mux.js/lib/mp4/audio-frame-utils.js","original":{"line":145,"column":0},"generated":{"line":1,"column":1053}}],"sources":{"node_modules/mux.js/lib/mp4/audio-frame-utils.js":"var coneOfSilence = require('../data/silence');\nvar clock = require('../utils/clock');\n\nvar ONE_SECOND_IN_TS = 90000; // 90kHz clock\n\n/**\n * Sum the `byteLength` properties of the data in each AAC frame\n */\nvar sumFrameByteLengths = function(array) {\n  var\n    i,\n    currentObj,\n    sum = 0;\n\n  // sum the byteLength's all each nal unit in the frame\n  for (i = 0; i < array.length; i++) {\n    currentObj = array[i];\n    sum += currentObj.data.byteLength;\n  }\n\n  return sum;\n};\n\n// Possibly pad (prefix) the audio track with silence if appending this track\n// would lead to the introduction of a gap in the audio buffer\nvar prefixWithSilence = function(\n  track,\n  frames,\n  audioAppendStartTs,\n  videoBaseMediaDecodeTime\n) {\n  var\n    baseMediaDecodeTimeTs,\n    frameDuration = 0,\n    audioGapDuration = 0,\n    audioFillFrameCount = 0,\n    audioFillDuration = 0,\n    silentFrame,\n    i;\n\n  if (!frames.length) {\n    return;\n  }\n\n  baseMediaDecodeTimeTs =\n    clock.audioTsToVideoTs(track.baseMediaDecodeTime, track.samplerate);\n  // determine frame clock duration based on sample rate, round up to avoid overfills\n  frameDuration = Math.ceil(ONE_SECOND_IN_TS / (track.samplerate / 1024));\n\n  if (audioAppendStartTs && videoBaseMediaDecodeTime) {\n    // insert the shortest possible amount (audio gap or audio to video gap)\n    audioGapDuration =\n      baseMediaDecodeTimeTs - Math.max(audioAppendStartTs, videoBaseMediaDecodeTime);\n    // number of full frames in the audio gap\n    audioFillFrameCount = Math.floor(audioGapDuration / frameDuration);\n    audioFillDuration = audioFillFrameCount * frameDuration;\n  }\n\n  // don't attempt to fill gaps smaller than a single frame or larger\n  // than a half second\n  if (audioFillFrameCount < 1 || audioFillDuration > ONE_SECOND_IN_TS / 2) {\n    return;\n  }\n\n  silentFrame = coneOfSilence[track.samplerate];\n\n  if (!silentFrame) {\n    // we don't have a silent frame pregenerated for the sample rate, so use a frame\n    // from the content instead\n    silentFrame = frames[0].data;\n  }\n\n  for (i = 0; i < audioFillFrameCount; i++) {\n    frames.splice(i, 0, {\n      data: silentFrame\n    });\n  }\n\n  track.baseMediaDecodeTime -=\n    Math.floor(clock.videoTsToAudioTs(audioFillDuration, track.samplerate));\n};\n\n// If the audio segment extends before the earliest allowed dts\n// value, remove AAC frames until starts at or after the earliest\n// allowed DTS so that we don't end up with a negative baseMedia-\n// DecodeTime for the audio track\nvar trimAdtsFramesByEarliestDts = function(adtsFrames, track, earliestAllowedDts) {\n  if (track.minSegmentDts >= earliestAllowedDts) {\n    return adtsFrames;\n  }\n\n  // We will need to recalculate the earliest segment Dts\n  track.minSegmentDts = Infinity;\n\n  return adtsFrames.filter(function(currentFrame) {\n    // If this is an allowed frame, keep it and record it's Dts\n    if (currentFrame.dts >= earliestAllowedDts) {\n      track.minSegmentDts = Math.min(track.minSegmentDts, currentFrame.dts);\n      track.minSegmentPts = track.minSegmentDts;\n      return true;\n    }\n    // Otherwise, discard it\n    return false;\n  });\n};\n\n// generate the track's raw mdat data from an array of frames\nvar generateSampleTable = function(frames) {\n  var\n    i,\n    currentFrame,\n    samples = [];\n\n  for (i = 0; i < frames.length; i++) {\n    currentFrame = frames[i];\n    samples.push({\n      size: currentFrame.data.byteLength,\n      duration: 1024 // For AAC audio, all samples contain 1024 samples\n    });\n  }\n  return samples;\n};\n\n// generate the track's sample table from an array of frames\nvar concatenateFrameData = function(frames) {\n  var\n    i,\n    currentFrame,\n    dataOffset = 0,\n    data = new Uint8Array(sumFrameByteLengths(frames));\n\n  for (i = 0; i < frames.length; i++) {\n    currentFrame = frames[i];\n\n    data.set(currentFrame.data, dataOffset);\n    dataOffset += currentFrame.data.byteLength;\n  }\n  return data;\n};\n\nmodule.exports = {\n  prefixWithSilence: prefixWithSilence,\n  trimAdtsFramesByEarliestDts: trimAdtsFramesByEarliestDts,\n  generateSampleTable: generateSampleTable,\n  concatenateFrameData: concatenateFrameData\n};\n"},"lineCount":null}},"hash":"f253fc22b778d34df5470b796544b9d4","cacheData":{"env":{}}}